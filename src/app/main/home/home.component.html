<div class="loading-spinner" *ngIf="loading">
  <app-progress-spinner></app-progress-spinner>
</div>

<div class="page">
<div class="header-block" *ngIf="!loading">
  <app-header *ngIf="lang==='en'"></app-header>
  <div [ngClass]="inRange ? 'banner' : 'banner-up' ">
    <div class="left-col">
      <div class="address-search-block">
        <app-address-input placeholder="Enter Delivery Address" 
          (addrChange)="onAddressInputChange($event)"
          (addrClear)="onAddressInputClear($event)"
          (inputFocus)="onAddressInputFocus($event)" 
          (backHistory)="onBack()" 
          [value]="deliveryAddress">
        </app-address-input>
      </div>
      <app-location-list *ngIf="places && places.length > 0" [account]="account" [places]="places" (placeSeleted)="onSelectPlace($event)">
      </app-location-list>

      <div class="ad-block" *ngIf="!(places && places.length > 0)">

      </div>
    </div>

    <div class="right-col">
      <img src="QRCODE_URL">
      <div class="text-xs">Wechat QR Code for Chinese</div>
    </div>
  </div>
</div>

<div class="merchant-list" *ngIf="!loading && !bPayment && !(places && places.length > 0) && inRange">
  <app-merchant-list *ngIf="!loading && !bPayment && !(places && places.length > 0) && inRange"
    [merchants]="merchants" [origin]="location">
  </app-merchant-list>
</div>

<div class="map-block" [class.range]="!inRange" *ngIf="!loading && !(places && places.length > 0) && !inRange">
  <app-map [location]="location" [center]="mapCenter" [zoom]="mapZoom" [places]="places" [areas]="areas"></app-map>
  <div class="map-info-row">
    <div class="map-info-text" i18n="@@MapHint">Sorry, the address is not in our service range.</div>
  </div>
</div>

<app-footer [type]="'menu'" [menu]="'home'"></app-footer>
</div>
